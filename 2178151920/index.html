<!DOCTYPE html>
<html lang="en">
<head>
    <script>
(() => {
  const START_ISO = "2025-10-17T20:00:00-06:00"; // Denver 8:00 PM
  const startTime = new Date(START_ISO).getTime(); // numeric ms
  if (Date.now() < startTime) {
    const parts = location.pathname.split('/').filter(Boolean);
    const basePath = parts.length ? `/${parts[0]}/` : '/';
    const url = new URL(`${basePath}locked.html`, location.origin);
    url.searchParams.set("until", String(startTime));
    location.replace(url.toString());
  }
})();
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>21</title>
<style>
  :root { color-scheme: dark; }
  html, body {
    margin: 0; height: 100%;
    background: #0b0b0d; color: #eae9ef;
    font: 16px/1.5 ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  }
  .wrap { max-width: 720px; margin: 10vh auto; padding: 0 20px; text-align: center; }
  .toplabel { font-size: 12px; text-transform: uppercase; letter-spacing: .18em; color:#9b98a7; opacity:.8; margin-bottom:15px; }

  /* question + hint styling */
  .q {
    margin: 8px 0 18px;
  }
  .q-label {
    font-size: clamp(22px, 4.6vw, 34px);
    font-weight: 700;
    margin-bottom: 8px;
    line-height: 1.2; /* tighter title spacing */
  }

  /* proper bullet list with hanging indent */
  .q-list {
    font-size: clamp(14px, 2vw, 18px);
    font-weight: 400;
    letter-spacing: normal;
    color: #c9c7d4;
    line-height: 1.6;
    text-align: left;
    display: inline-block;   /* keeps the list centered under the title */
    margin-top: 20px;
    padding-left: 1.25rem;   /* space for the bullet marker */
    list-style: disc;
    list-style-position: outside;
  }
  .q-list li { margin: 6px 0; }
  .q-list li::marker { color:#c9c7d4; }

  /* extra breathing room before form */
  form { 
    margin: 48px auto 6px;
  }

  input[type="text"]{
    background:#121217; border:1px solid #242432; color:#eae9ef; padding:12px 14px; border-radius:10px; outline:none;
    width:100%; max-width:360px;
  }
  input::placeholder{ color:#8a8996; }
  button{
    background:#2a2834; border:1px solid #3a3847; color:#eae9ef; padding:10px 14px; border-radius:10px; cursor:pointer;
    text-transform:lowercase; margin-top:10px; width:100%; max-width:360px;
  }
  button:hover{ background:#343244; }

  .result { margin-top: 32px; }

  /* message: start hidden, fade via inline opacity changes */
  .msg{
    font-size:14px; margin-bottom:8px;
    color:#c25b5b;
    opacity: 0;
    transition: opacity 1s ease, color .3s ease;
  }
  .msg.success { color:#f5c473; }

  /* rune fades in too */
  .sigil{
    display:none; opacity:0;
    margin:6px auto 0; max-width:min(80vw,520px);
    filter: drop-shadow(0 0 20px rgba(255, 0, 80, .25));
    transition: opacity 1s ease;
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="toplabel" id="toplabel">21</div>

  <div class="q">
    <div class="q-label">Unscramble the title of this horror film by solving for the letters below:</div>
    <ul class="q-list">
      <li>Third letter of Ghost</li>
      <li>Last letter of Turmoil</li>
      <li>The last letter of the first name of the true Bay Harbor Butcher</li>
      <li>Third to last letter of Skeleton</li>
      <li>The bookender letter of Edgar Allan Poe</li>
      <li>The penultimate letter of Nosferatu</li>
      <li>The fourth letter of Pumpkin</li>
      <li>Last letter of Zombie</li>
      <li>First letter of the first name of the protagonist in Sleepy Hollow</li>
      <li>The fourth letter in a synonym of scare that rhymes with night</li>
      <li>The first letter of the last name of the author of the Goosebumps book series.</li>
    </ul>
  </div>

  <form id="puzzleForm" autocomplete="off">
    <input id="answerInput" type="text" placeholder="Whisper the counterspell." aria-label="answer" />
    <button type="submit">cast</button>
  </form>

  <div class="result">
    <div class="msg" id="message"></div>
    <img id="sigil" class="sigil" alt="sigil unlocked" />
  </div>
</div>

<script>
  // --- per-page knobs ---
  const TOP_LABEL = "21";
  const RUNE_SRC = "./Rune_Ansuz.png";
  document.getElementById("toplabel").textContent = TOP_LABEL;

  // Accept these (case/space/punct-insensitive)
  const ENCODED_ANSWERS = [
    "cG9sdGVyZ2Vpc3Q="
  ];

  const normalize = s => (s||"").toLowerCase().replace(/[^a-z0-9]+/g,"");

  const form = document.getElementById("puzzleForm");
  const input = document.getElementById("answerInput");
  const msg   = document.getElementById("message");
  const sigil = document.getElementById("sigil");

  function showError(text){
    msg.textContent = text;
    msg.classList.remove("success");
    msg.style.opacity = 1;
  }

  form.addEventListener("submit",(e)=>{
    e.preventDefault();
    const candidate = normalize(input.value);
    if(!candidate){ showError("enter an answer."); return; }

    const ok = ENCODED_ANSWERS.includes(btoa(candidate));

    if(ok){
      msg.textContent = "You have revealed a rune.";
      msg.classList.add("success");
      msg.style.opacity = 0;
      requestAnimationFrame(()=>{ msg.style.opacity = 1; });

      sigil.src = RUNE_SRC;
      sigil.style.display = "block";
      sigil.style.opacity = 0;
      requestAnimationFrame(()=>{ sigil.style.opacity = 1; });

      input.disabled = true;
    } else {
      showError("try again.");
    }
  });

  setTimeout(()=> input && input.focus(), 50);
</script>
</body>
</html>
