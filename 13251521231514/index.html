<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>The Curse is Bound</title>
<style>
  :root { color-scheme: dark; }
  *,*::before,*::after { box-sizing: border-box; }

  html, body {
    margin: 0; height: 100%;
    background: #0b0b0d url("./begin/beginbkg.png") no-repeat center center fixed;
    background-size: cover;
    color: #eae9ef;
    font: 16px/1.55 ui-sans-serif, system-ui, -apple-system, "Segoe UI",
          Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  }

  .wrap { max-width: 720px; margin: 10vh auto; padding: 0 20px; text-align: center; }

  .title {
    font-size: clamp(28px, 5.6vw, 42px);
    font-weight: 800;
    letter-spacing: .02em;
    margin: 0 0 14px;
    line-height: 1.2;
    text-shadow: 0 2px 14px rgba(0,0,0,.35);
  }

  .intro {
    font-size: clamp(14px, 2.3vw, 18px);
    color:#c9c7d4;
    line-height: 1.6;
    margin: 0 auto 18px;
    max-width: 48ch;
    text-shadow: 0 2px 10px rgba(0,0,0,.35);
  }

  .card {
    max-width: 560px; width: 100%;
    margin: 22px auto 0; padding: 28px;
    border: 1px solid #3a3847; border-radius: 16px;
    background: linear-gradient(180deg, rgba(11,11,13,.92), rgba(18,18,23,.92));
    backdrop-filter: blur(2px);
    box-shadow: 0 10px 40px rgba(0,0,0,.6);
    text-align: center;
  }

  .prompt {
    font-size: clamp(15px, 2.4vw, 18px);
    color:#c9c7d4;
    line-height: 1.6;
    margin: 0 0 16px;
  }

  input[type="text"]{
    background:#121217; border:1px solid #242432; color:#eae9ef;
    padding:12px 14px; border-radius:10px; outline:none; width:100%;
    max-width: 420px;
  }
  input::placeholder{ color:#8a8996; }

  .hint {
    color:#9b98a7; opacity:.95; font-size: 12px; letter-spacing:.04em;
    margin: 8px 0 16px;
  }

  .preview {
    font-size: 13px; color:#c9c7d4; opacity:.95;
    margin: 4px auto 8px; max-width: 48ch;
  }
  .preview b { color:#eae9ef; }

  .actions { margin-top: 14px; }
  button{
    background:#2a2834; border:1px solid #3a3847; color:#eae9ef;
    padding:12px 16px; border-radius:10px; cursor:pointer; width:100%;
    max-width:280px; font-weight:700; letter-spacing:.02em;
    text-transform: none; /* keep your exact casing */
  }
  button:hover{ background:#343244; }

  .msg {
    margin-top: 12px; min-height:1.2em; font-size:14px;
    color:#f5c473; opacity:0; transition: opacity .8s ease;
  }
  .msg.show { opacity: 1; }
  .msg.error { color:#c25b5b; }
</style>
</head>
<body>
  <div class="wrap">
    <h1 class="title">The Curse is Bound!</h1>
    <p class="intro">
      You have contained the witch’s power, yet the darkness still stirs.
      One final act must be done.
    </p>

    <div class="card">
      <p class="prompt">Inscribe your name(s) upon the wall to complete the final rite.</p>

      <form id="ritualForm" autocomplete="off" novalidate>
        <input id="names" name="names" type="text" placeholder="Enter names here, separated by commas" />
        <div class="hint">Example: Eleni, Amie, Vanessa</div>

        <div id="preview" class="preview" aria-live="polite"></div>

        <div class="actions">
          <button type="submit">Conjure the Ritual Now</button>
        </div>
        <div id="msg" class="msg" aria-live="polite"></div>
      </form>
    </div>
  </div>

<script>
/* Mechanics can be wired later; for now this just does light UX and (optionally) navigation. */

// Format a comma-separated list into “…, …, and …”
function formatListWithAnd(raw){
  const parts = (raw || '')
    .split(',')
    .map(s => s.trim())
    .filter(Boolean);

  if (parts.length === 0) return '';
  if (parts.length === 1) return parts[0];
  if (parts.length === 2) return parts[0] + ' and ' + parts[1];

  // Oxford comma for 3+
  return parts.slice(0, -1).join(', ') + ', and ' + parts[parts.length - 1];
}

const form = document.getElementById('ritualForm');
const input = document.getElementById('names');
const preview = document.getElementById('preview');
const msg = document.getElementById('msg');

// Live preview so players see how names appear on the TV
function updatePreview(){
  const formatted = formatListWithAnd(input.value);
  preview.textContent = formatted
    ? `Will display as: “${formatted}”`
    : '';
}
input.addEventListener('input', updatePreview);
updatePreview();

form.addEventListener('submit', (e)=>{
  e.preventDefault();

  const formatted = formatListWithAnd(input.value);
  if (!formatted) {
    msg.textContent = 'Add at least one name.';
    msg.classList.remove('show');
    msg.classList.add('error','show');
    return;
  }

  // Show the “charging up” line for drama; wire triggers later
  msg.textContent = '…the ritual circle stirs.';
  msg.classList.remove('error');
  msg.classList.add('show');

  // TODO: Here’s where we’ll call your backend / Home Assistant / OBS trigger.
  // For now, we just hold the message. Leave this as a clean anchor point:
  // triggerRitual(formatted);

  // Optionally: disable inputs to prevent double-cast
  [...form.elements].forEach(el => el.disabled = true);
});
</script>
</body>
</html>
